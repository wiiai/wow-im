import{b as S,A as Ve,B as G,D as me,E as We,G as Ze,H as je,I as Ue,J as _e,K as E,d as z,L as ye,M as xe,e as B,N as we,O as ke,P as Ce,Q as p,R as Be,l as u,S as I,U as Se,V as O,W as Te,X as D,Y as j,Z as H,$ as J,a0 as Ke,a1 as q,o as qe,a2 as te,a3 as Xe,a4 as Ie,a5 as Ye,a6 as Ge,a7 as Je,a8 as Qe,a9 as L,aa as re,ab as et,ac as tt,ad as se,ae as nt,af as at,ag as ot,ah as lt,ai as it,aj as rt,ak as st,al as ct,am as dt,an as ut,ao as ft,ap as vt,aq as ht,ar as bt,as as ce,at as gt,au as Q,z as Re,u as mt,_ as $e,f as F,m as X,n as ee,p as N,F as de,j as _t,h as ue,s as fe,t as ve,i as yt,g as xt,av as wt,q as kt}from"./index.656158b6.js";function Ct(){const e=S([]),o=[];return Ve(()=>{e.value=[]}),[e,i=>(o[i]||(o[i]=n=>{e.value[i]=n}),o[i])]}function Bt(e,o,a){let i=0;const n=e.scrollLeft,l=a===0?1:Math.round(a*1e3/16);function c(){e.scrollLeft+=(o-n)/l,++i<l&&G(c)}c()}function St(e,o,a,i){let n=me(e);const l=n<o,c=a===0?1:Math.round(a*1e3/16),g=(o-n)/c;function s(){n+=g,(l&&n>o||!l&&n<o)&&(n=o),We(e,n),l&&n<o||!l&&n>o?G(s):i&&G(i)}s()}function Tt(e,o){if(!Ze||!window.IntersectionObserver)return;const a=new IntersectionObserver(l=>{o(l[0].intersectionRatio>0)},{root:document.body}),i=()=>{e.value&&a.observe(e.value)},n=()=>{e.value&&a.unobserve(e.value)};je(n),Ue(n),_e(i)}const[It,Rt]=E("sticky"),$t={zIndex:I,position:Se("top"),container:Object,offsetTop:O(0),offsetBottom:O(0)};var Pt=z({name:It,props:$t,emits:["scroll","change"],setup(e,{emit:o,slots:a}){const i=S(),n=ye(i),l=xe({fixed:!1,width:0,height:0,transform:0}),c=B(()=>we(e.position==="top"?e.offsetTop:e.offsetBottom)),g=B(()=>{const{fixed:f,height:y,width:x}=l;if(f)return{width:`${x}px`,height:`${y}px`}}),s=B(()=>{if(!l.fixed)return;const f=ke(Ce(e.zIndex),{width:`${l.width}px`,height:`${l.height}px`,[e.position]:`${c.value}px`});return l.transform&&(f.transform=`translate3d(0, ${l.transform}px, 0)`),f}),w=f=>o("scroll",{scrollTop:f,isFixed:l.fixed}),h=()=>{if(!i.value||Te(i))return;const{container:f,position:y}=e,x=D(i),b=me(window);if(l.width=x.width,l.height=x.height,y==="top")if(f){const k=D(f),d=k.bottom-c.value-l.height;l.fixed=c.value>x.top&&k.bottom>0,l.transform=d<0?d:0}else l.fixed=c.value>x.top;else{const{clientHeight:k}=document.documentElement;if(f){const d=D(f),R=k-d.top-c.value-l.height;l.fixed=k-c.value<x.bottom&&k>d.top,l.transform=R<0?-R:0}else l.fixed=k-c.value<x.bottom}w(b)};return p(()=>l.fixed,f=>o("change",f)),Be("scroll",h,{target:n,passive:!0}),Tt(i,h),()=>{var f;return u("div",{ref:i,style:g.value},[u("div",{class:Rt({fixed:l.fixed}),style:s.value},[(f=a.default)==null?void 0:f.call(a)])])}}});const At=j(Pt),[Nt,he]=E("tab");var pt=z({name:Nt,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:I,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:H},setup(e,{slots:o}){const a=B(()=>{const n={},{type:l,color:c,disabled:g,isActive:s,activeColor:w,inactiveColor:h}=e;c&&l==="card"&&(n.borderColor=c,g||(s?n.backgroundColor=c:n.color=c));const y=s?w:h;return y&&(n.color=y),n}),i=()=>{const n=u("span",{class:he("text",{ellipsis:!e.scrollable})},[o.title?o.title():e.title]);return e.dot||J(e.badge)&&e.badge!==""?u(Ke,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[n]}):n};return()=>u("div",{id:e.id,role:"tab",class:[he([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:a.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[i()])}});const[zt,be]=E("tabs");var Lt=z({name:zt,props:{count:q(Number),inited:Boolean,animated:Boolean,duration:q(I),swipeable:Boolean,lazyRender:Boolean,currentIndex:q(Number)},emits:["change"],setup(e,{emit:o,slots:a}){const i=S(),n=g=>o("change",g),l=()=>{var g;const s=(g=a.default)==null?void 0:g.call(a);return e.animated||e.swipeable?u(Xe,{ref:i,loop:!1,class:be("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:n},{default:()=>[s]}):s},c=g=>{const s=i.value;s&&s.state.active!==g&&s.swipeTo(g,{immediate:!e.inited})};return p(()=>e.currentIndex,c),qe(()=>{c(e.currentIndex)}),te({swipeRef:i}),()=>u("div",{class:be("content",{animated:e.animated||e.swipeable})},[l()])}});const[Pe,Z]=E("tabs"),Ot={type:Se("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:O(0),duration:O(.3),animated:Boolean,ellipsis:H,swipeable:Boolean,scrollspy:Boolean,offsetTop:O(0),background:String,lazyRender:H,lineWidth:I,lineHeight:I,beforeChange:Function,swipeThreshold:O(5),titleActiveColor:String,titleInactiveColor:String},Ae=Symbol(Pe);var Et=z({name:Pe,props:Ot,emits:["click","change","scroll","disabled","rendered","click-tab","update:active"],setup(e,{emit:o,slots:a}){let i,n,l;const c=S(),g=S(),s=S(),w=S(),h=Ie(),f=ye(c),[y,x]=Ct(),{children:b,linkChildren:k}=Ye(Ae),d=xe({inited:!1,position:"",lineStyle:{},currentIndex:-1}),R=B(()=>b.length>e.swipeThreshold||!e.ellipsis||e.shrink),U=B(()=>({borderColor:e.color,background:e.background})),$=(t,r)=>{var v;return(v=t.name)!=null?v:r},ne=B(()=>{const t=b[d.currentIndex];if(t)return $(t,d.currentIndex)}),K=B(()=>we(e.offsetTop)),ae=B(()=>e.sticky?K.value+i:0),M=t=>{const r=g.value,v=y.value;if(!R.value||!r||!v||!v[d.currentIndex])return;const m=v[d.currentIndex].$el,_=m.offsetLeft-(r.offsetWidth-m.offsetWidth)/2;Bt(r,_,t?0:+e.duration)},P=()=>{const t=d.inited;L(()=>{const r=y.value;if(!r||!r[d.currentIndex]||e.type!=="line"||Te(c.value))return;const v=r[d.currentIndex].$el,{lineWidth:m,lineHeight:_}=e,C=v.offsetLeft+v.offsetWidth/2,A={width:re(m),backgroundColor:e.color,transform:`translateX(${C}px) translateX(-50%)`};if(t&&(A.transitionDuration=`${e.duration}s`),J(_)){const ie=re(_);A.height=ie,A.borderRadius=ie}d.lineStyle=A})},Ne=t=>{const r=t<d.currentIndex?-1:1;for(;t>=0&&t<b.length;){if(!b[t].disabled)return t;t+=r}},V=(t,r)=>{const v=Ne(t);if(!J(v))return;const m=b[v],_=$(m,v),C=d.currentIndex!==null;d.currentIndex!==v&&(d.currentIndex=v,r||M(),P()),_!==e.active&&(o("update:active",_),C&&o("change",_,m.title)),l&&!e.scrollspy&&tt(Math.ceil(se(c.value)-K.value))},W=(t,r)=>{const v=b.find((_,C)=>$(_,C)===t),m=v?b.indexOf(v):0;V(m,r)},oe=(t=!1)=>{if(e.scrollspy){const r=b[d.currentIndex].$el;if(r&&f.value){const v=se(r,f.value)-ae.value;n=!0,St(f.value,v,t?0:+e.duration,()=>{n=!1})}}},pe=(t,r,v)=>{const{title:m,disabled:_}=b[r],C=$(b[r],r);_?o("disabled",C,m):(ot(e.beforeChange,{args:[C],done:()=>{V(r),oe()}}),o("click",C,m),lt(t)),o("click-tab",{name:C,title:m,event:v,disabled:_})},ze=t=>{l=t.isFixed,o("scroll",t)},Le=t=>{L(()=>{W(t),oe(!0)})},Oe=()=>{for(let t=0;t<b.length;t++){const{top:r}=D(b[t].$el);if(r>ae.value)return t===0?0:t-1}return b.length-1},Ee=()=>{if(e.scrollspy&&!n){const t=Oe();V(t)}},De=()=>b.map((t,r)=>u(pt,nt({key:t.id,id:`${h}-${r}`,ref:x(r),type:e.type,color:e.color,style:t.titleStyle,class:t.titleClass,shrink:e.shrink,isActive:r===d.currentIndex,controls:t.id,scrollable:R.value,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,onClick:v=>pe(t,r,v)},at(t,["dot","badge","title","disabled","showZeroBadge"])),{title:t.$slots.title})),Fe=()=>{if(e.type==="line"&&b.length)return u("div",{class:Z("line"),style:d.lineStyle},null)},le=()=>{var t,r,v;const{type:m,border:_,sticky:C}=e,A=[u("div",{ref:C?void 0:s,class:[Z("wrap"),{[et]:m==="line"&&_}]},[u("div",{ref:g,role:"tablist",class:Z("nav",[m,{shrink:e.shrink,complete:R.value}]),style:U.value,"aria-orientation":"horizontal"},[(t=a["nav-left"])==null?void 0:t.call(a),De(),Fe(),(r=a["nav-right"])==null?void 0:r.call(a)])]),(v=a["nav-bottom"])==null?void 0:v.call(a)];return C?u("div",{ref:s},[A]):A};p([()=>e.color,Ge],P),p(()=>e.active,t=>{t!==ne.value&&W(t)}),p(()=>b.length,()=>{d.inited&&(W(e.active),P(),L(()=>{M(!0)}))});const He=()=>{W(e.active,!0),L(()=>{d.inited=!0,s.value&&(i=D(s.value).height),M(!0)})},Me=(t,r)=>o("rendered",t,r);return te({resize:()=>{P(),L(()=>{var t,r;return(r=(t=w.value)==null?void 0:t.swipeRef.value)==null?void 0:r.resize()})},scrollTo:Le}),Je(P),Qe(P),_e(He),Be("scroll",Ee,{target:f,passive:!0}),k({id:h,props:e,setLine:P,onRendered:Me,currentName:ne,scrollIntoView:M}),()=>u("div",{ref:c,class:Z([e.type])},[e.sticky?u(At,{container:c.value,offsetTop:K.value,onScroll:ze},{default:()=>[le()]}):le(),u(Lt,{ref:w,count:b.length,inited:d.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:d.currentIndex,onChange:V},{default:()=>{var t;return[(t=a.default)==null?void 0:t.call(a)]}})])}});const[Dt,Y]=E("tab"),Ft=ke({},it,{dot:Boolean,name:I,badge:I,title:String,disabled:Boolean,titleClass:rt,titleStyle:[String,Object],showZeroBadge:H});var Ht=z({name:Dt,props:Ft,setup(e,{slots:o}){const a=Ie(),i=S(!1),{parent:n,index:l}=st(Ae);if(!n)return;const c=()=>{var h;return(h=e.name)!=null?h:l.value},g=()=>{i.value=!0,n.props.lazyRender&&L(()=>{n.onRendered(c(),e.title)})},s=B(()=>{const h=c()===n.currentName.value;return h&&!i.value&&g(),h}),w=S(!s.value);return p(s,h=>{h?w.value=!1:ht(()=>{w.value=!0})}),p(()=>e.title,()=>{n.setLine(),n.scrollIntoView()}),ct(dt,s),()=>{var h;const f=`${n.id}-${l.value}`,{animated:y,swipeable:x,scrollspy:b,lazyRender:k}=n.props;if(!o.default&&!y)return;const d=b||s.value;if(y||x)return u(ut,{id:a,role:"tabpanel",class:Y("panel-wrapper",{inactive:w.value}),tabindex:s.value?0:-1,"aria-hidden":!s.value,"aria-labelledby":f},{default:()=>{var $;return[u("div",{class:Y("panel")},[($=o.default)==null?void 0:$.call(o)])]}});const U=i.value||b||!k?(h=o.default)==null?void 0:h.call(o):null;return te({id:a}),ft(u("div",{id:a,role:"tabpanel",class:Y("panel"),tabindex:d?0:-1,"aria-labelledby":f},[U]),[[vt,d]])}}});const Mt=j(Ht),Vt=j(Et),[Wt,T]=E("nav-bar"),Zt={title:String,fixed:Boolean,zIndex:I,border:H,leftText:String,rightText:String,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean};var jt=z({name:Wt,props:Zt,emits:["click-left","click-right"],setup(e,{emit:o,slots:a}){const i=S(),n=bt(i,T),l=h=>o("click-left",h),c=h=>o("click-right",h),g=()=>a.left?a.left():[e.leftArrow&&u(Q,{class:T("arrow"),name:"arrow-left"},null),e.leftText&&u("span",{class:T("text")},[e.leftText])],s=()=>a.right?a.right():u("span",{class:T("text")},[e.rightText]),w=()=>{const{title:h,fixed:f,border:y,zIndex:x}=e,b=Ce(x),k=e.leftArrow||e.leftText||a.left,d=e.rightText||a.right;return u("div",{ref:i,style:b,class:[T({fixed:f}),{[gt]:y,"van-safe-area-top":e.safeAreaInsetTop}]},[u("div",{class:T("content")},[k&&u("div",{class:[T("left"),ce],onClick:l},[g()]),u("div",{class:[T("title"),"van-ellipsis"]},[a.title?a.title():h]),d&&u("div",{class:[T("right"),ce],onClick:c},[s()])])])};return()=>e.fixed&&e.placeholder?n(w):w()}});const ge=j(jt),Ut=z({components:{[Q.name]:Q},props:{activeIndex:{type:Number,default:0}},setup(){const e=Re(),o=mt();return S(0),{menus:B(()=>[{span:"\u6D88\u606F",icon:"chat-o",activeIcon:"chat",path:"/",dot:o.unReadNum},{span:"\u901A\u8BAF\u5F55",icon:"friends-o",activeIcon:"friends",path:"/friend"},{span:"\u6211\u7684",icon:"manager-o",activeIcon:"manager",path:"/me"}]),handleClick:(n,l)=>{e.push(n.path)}}}});const Kt={class:"tab-bar"};function qt(e,o,a,i,n,l){const c=ee("van-tabbar-item"),g=ee("van-tabbar");return N(),F("div",Kt,[u(g,{route:""},{default:X(()=>[(N(!0),F(de,null,_t(e.menus,s=>(N(),F(de,null,[s.dot?(N(),ue(c,{key:0,replace:"",to:s.path,icon:s.icon,badge:s.dot},{default:X(()=>[fe(ve(s.span),1)]),_:2},1032,["to","icon","badge"])):(N(),ue(c,{key:1,replace:"",to:s.path,icon:s.icon},{default:X(()=>[fe(ve(s.span),1)]),_:2},1032,["to","icon"]))],64))),256))]),_:1})])}const Xt=$e(Ut,[["render",qt],["__scopeId","data-v-2e4e3434"]]),Yt={components:{TabBar:Xt,Tab:Mt,Tabs:Vt,[ge.name]:ge},props:{tabBarProps:{type:Object,default(){return null}},title:{type:String}},setup(){const e=Re();return{onClickLeft(){e.back()}}}};const Gt={class:"page"},Jt={key:0,class:"header"};function Qt(e,o,a,i,n,l){const c=ee("van-nav-bar");return N(),F("div",Gt,[a.title?(N(),F("div",Jt,[u(c,{title:a.title,"left-arrow":"",onClickLeft:i.onClickLeft},null,8,["title","onClickLeft"])])):yt("",!0),xt("div",{class:kt(["body",[{"with-tab-bar":Boolean(a.tabBarProps),"with-header":Boolean(a.title)}]])},[wt(e.$slots,"default",{},void 0,!0)],2)])}const nn=$e(Yt,[["render",Qt],["__scopeId","data-v-7caf6357"]]);export{nn as P};
