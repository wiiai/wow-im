import{b as C,B as Me,D as G,E as me,G as We,H as Ze,I as Ve,J as je,K as ye,L,d as N,M as xe,N as _e,e as S,O as we,P as ke,Q as Te,R as p,S as Se,l as v,U as I,V as Ce,W as z,X as Be,Y as D,Z as V,$ as F,a0 as J,a1 as Ue,a2 as K,o as Ke,a3 as ee,a4 as Xe,a5 as Ie,a6 as Ye,a7 as qe,a8 as Ge,a9 as Je,aa as O,ab as ie,ac as Qe,ad as et,ae as re,af as tt,ag as nt,ah as at,ai as ot,aj as lt,ak as it,al as rt,am as st,an as ct,ao as dt,ap as ut,aq as ft,ar as vt,as as ht,at as se,au as bt,av as Q,A as Re,u as gt,_ as mt,f as X,m as Y,n as ce,p as E,F as de,j as yt,h as ue,s as fe,t as ve}from"./index.cbcc5805.js";function xt(){const e=C([]),a=[];return Me(()=>{e.value=[]}),[e,s=>(a[s]||(a[s]=n=>{e.value[s]=n}),a[s])]}function _t(e,a,l){let s=0;const n=e.scrollLeft,o=l===0?1:Math.round(l*1e3/16);function c(){e.scrollLeft+=(a-n)/o,++s<o&&G(c)}c()}function wt(e,a,l,s){let n=me(e);const o=n<a,c=l===0?1:Math.round(l*1e3/16),g=(a-n)/c;function r(){n+=g,(o&&n>a||!o&&n<a)&&(n=a),We(e,n),o&&n<a||!o&&n>a?G(r):s&&G(s)}r()}function kt(e,a){if(!Ze||!window.IntersectionObserver)return;const l=new IntersectionObserver(o=>{a(o[0].intersectionRatio>0)},{root:document.body}),s=()=>{e.value&&l.observe(e.value)},n=()=>{e.value&&l.unobserve(e.value)};Ve(n),je(n),ye(s)}const[Tt,St]=L("sticky"),Ct={zIndex:I,position:Ce("top"),container:Object,offsetTop:z(0),offsetBottom:z(0)};var Bt=N({name:Tt,props:Ct,emits:["scroll","change"],setup(e,{emit:a,slots:l}){const s=C(),n=xe(s),o=_e({fixed:!1,width:0,height:0,transform:0}),c=S(()=>we(e.position==="top"?e.offsetTop:e.offsetBottom)),g=S(()=>{const{fixed:u,height:x,width:_}=o;if(u)return{width:`${_}px`,height:`${x}px`}}),r=S(()=>{if(!o.fixed)return;const u=ke(Te(e.zIndex),{width:`${o.width}px`,height:`${o.height}px`,[e.position]:`${c.value}px`});return o.transform&&(u.transform=`translate3d(0, ${o.transform}px, 0)`),u}),w=u=>a("scroll",{scrollTop:u,isFixed:o.fixed}),h=()=>{if(!s.value||Be(s))return;const{container:u,position:x}=e,_=D(s),b=me(window);if(o.width=_.width,o.height=_.height,x==="top")if(u){const k=D(u),d=k.bottom-c.value-o.height;o.fixed=c.value>_.top&&k.bottom>0,o.transform=d<0?d:0}else o.fixed=c.value>_.top;else{const{clientHeight:k}=document.documentElement;if(u){const d=D(u),R=k-d.top-c.value-o.height;o.fixed=k-c.value<_.bottom&&k>d.top,o.transform=R<0?-R:0}else o.fixed=k-c.value<_.bottom}w(b)};return p(()=>o.fixed,u=>a("change",u)),Se("scroll",h,{target:n,passive:!0}),kt(s,h),()=>{var u;return v("div",{ref:s,style:g.value},[v("div",{class:St({fixed:o.fixed}),style:r.value},[(u=l.default)==null?void 0:u.call(l)])])}}});const It=V(Bt),[Rt,he]=L("tab");var $t=N({name:Rt,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:I,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:F},setup(e,{slots:a}){const l=S(()=>{const n={},{type:o,color:c,disabled:g,isActive:r,activeColor:w,inactiveColor:h}=e;c&&o==="card"&&(n.borderColor=c,g||(r?n.backgroundColor=c:n.color=c));const x=r?w:h;return x&&(n.color=x),n}),s=()=>{const n=v("span",{class:he("text",{ellipsis:!e.scrollable})},[a.title?a.title():e.title]);return e.dot||J(e.badge)&&e.badge!==""?v(Ue,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[n]}):n};return()=>v("div",{id:e.id,role:"tab",class:[he([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:l.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[s()])}});const[At,be]=L("tabs");var Pt=N({name:At,props:{count:K(Number),inited:Boolean,animated:Boolean,duration:K(I),swipeable:Boolean,lazyRender:Boolean,currentIndex:K(Number)},emits:["change"],setup(e,{emit:a,slots:l}){const s=C(),n=g=>a("change",g),o=()=>{var g;const r=(g=l.default)==null?void 0:g.call(l);return e.animated||e.swipeable?v(Xe,{ref:s,loop:!1,class:be("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:n},{default:()=>[r]}):r},c=g=>{const r=s.value;r&&r.state.active!==g&&r.swipeTo(g,{immediate:!e.inited})};return p(()=>e.currentIndex,c),Ke(()=>{c(e.currentIndex)}),ee({swipeRef:s}),()=>v("div",{class:be("content",{animated:e.animated||e.swipeable})},[o()])}});const[$e,Z]=L("tabs"),pt={type:Ce("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:z(0),duration:z(.3),animated:Boolean,ellipsis:F,swipeable:Boolean,scrollspy:Boolean,offsetTop:z(0),background:String,lazyRender:F,lineWidth:I,lineHeight:I,beforeChange:Function,swipeThreshold:z(5),titleActiveColor:String,titleInactiveColor:String},Ae=Symbol($e);var Nt=N({name:$e,props:pt,emits:["click","change","scroll","disabled","rendered","click-tab","update:active"],setup(e,{emit:a,slots:l}){let s,n,o;const c=C(),g=C(),r=C(),w=C(),h=Ie(),u=xe(c),[x,_]=xt(),{children:b,linkChildren:k}=Ye(Ae),d=_e({inited:!1,position:"",lineStyle:{},currentIndex:-1}),R=S(()=>b.length>e.swipeThreshold||!e.ellipsis||e.shrink),j=S(()=>({borderColor:e.color,background:e.background})),$=(t,i)=>{var f;return(f=t.name)!=null?f:i},te=S(()=>{const t=b[d.currentIndex];if(t)return $(t,d.currentIndex)}),U=S(()=>we(e.offsetTop)),ne=S(()=>e.sticky?U.value+s:0),H=t=>{const i=g.value,f=x.value;if(!R.value||!i||!f||!f[d.currentIndex])return;const m=f[d.currentIndex].$el,y=m.offsetLeft-(i.offsetWidth-m.offsetWidth)/2;_t(i,y,t?0:+e.duration)},A=()=>{const t=d.inited;O(()=>{const i=x.value;if(!i||!i[d.currentIndex]||e.type!=="line"||Be(c.value))return;const f=i[d.currentIndex].$el,{lineWidth:m,lineHeight:y}=e,T=f.offsetLeft+f.offsetWidth/2,P={width:ie(m),backgroundColor:e.color,transform:`translateX(${T}px) translateX(-50%)`};if(t&&(P.transitionDuration=`${e.duration}s`),J(y)){const le=ie(y);P.height=le,P.borderRadius=le}d.lineStyle=P})},Pe=t=>{const i=t<d.currentIndex?-1:1;for(;t>=0&&t<b.length;){if(!b[t].disabled)return t;t+=i}},M=(t,i)=>{const f=Pe(t);if(!J(f))return;const m=b[f],y=$(m,f),T=d.currentIndex!==null;d.currentIndex!==f&&(d.currentIndex=f,i||H(),A()),y!==e.active&&(a("update:active",y),T&&a("change",y,m.title)),o&&!e.scrollspy&&et(Math.ceil(re(c.value)-U.value))},W=(t,i)=>{const f=b.find((y,T)=>$(y,T)===t),m=f?b.indexOf(f):0;M(m,i)},ae=(t=!1)=>{if(e.scrollspy){const i=b[d.currentIndex].$el;if(i&&u.value){const f=re(i,u.value)-ne.value;n=!0,wt(u.value,f,t?0:+e.duration,()=>{n=!1})}}},pe=(t,i,f)=>{const{title:m,disabled:y}=b[i],T=$(b[i],i);y?a("disabled",T,m):(at(e.beforeChange,{args:[T],done:()=>{M(i),ae()}}),a("click",T,m),ot(t)),a("click-tab",{name:T,title:m,event:f,disabled:y})},Ne=t=>{o=t.isFixed,a("scroll",t)},Oe=t=>{O(()=>{W(t),ae(!0)})},ze=()=>{for(let t=0;t<b.length;t++){const{top:i}=D(b[t].$el);if(i>ne.value)return t===0?0:t-1}return b.length-1},Le=()=>{if(e.scrollspy&&!n){const t=ze();M(t)}},Ee=()=>b.map((t,i)=>v($t,tt({key:t.id,id:`${h}-${i}`,ref:_(i),type:e.type,color:e.color,style:t.titleStyle,class:t.titleClass,shrink:e.shrink,isActive:i===d.currentIndex,controls:t.id,scrollable:R.value,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,onClick:f=>pe(t,i,f)},nt(t,["dot","badge","title","disabled","showZeroBadge"])),{title:t.$slots.title})),De=()=>{if(e.type==="line"&&b.length)return v("div",{class:Z("line"),style:d.lineStyle},null)},oe=()=>{var t,i,f;const{type:m,border:y,sticky:T}=e,P=[v("div",{ref:T?void 0:r,class:[Z("wrap"),{[Qe]:m==="line"&&y}]},[v("div",{ref:g,role:"tablist",class:Z("nav",[m,{shrink:e.shrink,complete:R.value}]),style:j.value,"aria-orientation":"horizontal"},[(t=l["nav-left"])==null?void 0:t.call(l),Ee(),De(),(i=l["nav-right"])==null?void 0:i.call(l)])]),(f=l["nav-bottom"])==null?void 0:f.call(l)];return T?v("div",{ref:r},[P]):P};p([()=>e.color,qe],A),p(()=>e.active,t=>{t!==te.value&&W(t)}),p(()=>b.length,()=>{d.inited&&(W(e.active),A(),O(()=>{H(!0)}))});const Fe=()=>{W(e.active,!0),O(()=>{d.inited=!0,r.value&&(s=D(r.value).height),H(!0)})},He=(t,i)=>a("rendered",t,i);return ee({resize:()=>{A(),O(()=>{var t,i;return(i=(t=w.value)==null?void 0:t.swipeRef.value)==null?void 0:i.resize()})},scrollTo:Oe}),Ge(A),Je(A),ye(Fe),Se("scroll",Le,{target:u,passive:!0}),k({id:h,props:e,setLine:A,onRendered:He,currentName:te,scrollIntoView:H}),()=>v("div",{ref:c,class:Z([e.type])},[e.sticky?v(It,{container:c.value,offsetTop:U.value,onScroll:Ne},{default:()=>[oe()]}):oe(),v(Pt,{ref:w,count:b.length,inited:d.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:d.currentIndex,onChange:M},{default:()=>{var t;return[(t=l.default)==null?void 0:t.call(l)]}})])}});const[Ot,q]=L("tab"),zt=ke({},lt,{dot:Boolean,name:I,badge:I,title:String,disabled:Boolean,titleClass:it,titleStyle:[String,Object],showZeroBadge:F});var Lt=N({name:Ot,props:zt,setup(e,{slots:a}){const l=Ie(),s=C(!1),{parent:n,index:o}=rt(Ae);if(!n)return;const c=()=>{var h;return(h=e.name)!=null?h:o.value},g=()=>{s.value=!0,n.props.lazyRender&&O(()=>{n.onRendered(c(),e.title)})},r=S(()=>{const h=c()===n.currentName.value;return h&&!s.value&&g(),h}),w=C(!r.value);return p(r,h=>{h?w.value=!1:vt(()=>{w.value=!0})}),p(()=>e.title,()=>{n.setLine(),n.scrollIntoView()}),st(ct,r),()=>{var h;const u=`${n.id}-${o.value}`,{animated:x,swipeable:_,scrollspy:b,lazyRender:k}=n.props;if(!a.default&&!x)return;const d=b||r.value;if(x||_)return v(dt,{id:l,role:"tabpanel",class:q("panel-wrapper",{inactive:w.value}),tabindex:r.value?0:-1,"aria-hidden":!r.value,"aria-labelledby":u},{default:()=>{var $;return[v("div",{class:q("panel")},[($=a.default)==null?void 0:$.call(a)])]}});const j=s.value||b||!k?(h=a.default)==null?void 0:h.call(a):null;return ee({id:l}),ut(v("div",{id:l,role:"tabpanel",class:q("panel"),tabindex:d?0:-1,"aria-labelledby":u},[j]),[[ft,d]])}}});const Et=V(Lt),Dt=V(Nt),[Ft,B]=L("nav-bar"),Ht={title:String,fixed:Boolean,zIndex:I,border:F,leftText:String,rightText:String,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean};var Mt=N({name:Ft,props:Ht,emits:["click-left","click-right"],setup(e,{emit:a,slots:l}){const s=C(),n=ht(s,B),o=h=>a("click-left",h),c=h=>a("click-right",h),g=()=>l.left?l.left():[e.leftArrow&&v(Q,{class:B("arrow"),name:"arrow-left"},null),e.leftText&&v("span",{class:B("text")},[e.leftText])],r=()=>l.right?l.right():v("span",{class:B("text")},[e.rightText]),w=()=>{const{title:h,fixed:u,border:x,zIndex:_}=e,b=Te(_),k=e.leftArrow||e.leftText||l.left,d=e.rightText||l.right;return v("div",{ref:s,style:b,class:[B({fixed:u}),{[bt]:x,"van-safe-area-top":e.safeAreaInsetTop}]},[v("div",{class:B("content")},[k&&v("div",{class:[B("left"),se],onClick:o},[g()]),v("div",{class:[B("title"),"van-ellipsis"]},[l.title?l.title():h]),d&&v("div",{class:[B("right"),se],onClick:c},[r()])])])};return()=>e.fixed&&e.placeholder?n(w):w()}});const ge=V(Mt),Wt=N({components:{[Q.name]:Q},props:{activeIndex:{type:Number,default:0}},setup(){const e=Re(),a=gt();return C(0),{menus:S(()=>[{span:"\u6D88\u606F",icon:"chat-o",activeIcon:"chat",path:"/",dot:a.unReadNum},{span:"\u901A\u8BAF\u5F55",icon:"friends-o",activeIcon:"friends",path:"/friend"},{span:"\u6211\u7684",icon:"manager-o",activeIcon:"manager",path:"/me"}]),handleClick:(n,o)=>{e.push(n.path)}}}});const Zt={class:"tab-bar"};function Vt(e,a,l,s,n,o){const c=ce("van-tabbar-item"),g=ce("van-tabbar");return E(),X("div",Zt,[v(g,{route:""},{default:Y(()=>[(E(!0),X(de,null,yt(e.menus,r=>(E(),X(de,null,[r.dot?(E(),ue(c,{key:0,replace:"",to:r.path,icon:r.icon,badge:r.dot},{default:Y(()=>[fe(ve(r.span),1)]),_:2},1032,["to","icon","badge"])):(E(),ue(c,{key:1,replace:"",to:r.path,icon:r.icon},{default:Y(()=>[fe(ve(r.span),1)]),_:2},1032,["to","icon"]))],64))),256))]),_:1})])}const jt=mt(Wt,[["render",Vt],["__scopeId","data-v-2e4e3434"]]),Xt={components:{TabBar:jt,Tab:Et,Tabs:Dt,[ge.name]:ge},props:{tabBarProps:{type:Object,default(){return null}},title:{type:String}},setup(){const e=Re();return{onClickLeft(){e.back()}}}};export{Xt as _};
