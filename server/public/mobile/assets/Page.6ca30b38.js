import{j as T,k as We,l as J,m as _e,s as Ze,n as je,p as Ue,q as Ke,v as ye,x as E,d as L,y as xe,z as ke,c as C,A as we,B as Be,C as Ce,D as z,E as Te,G as u,H as R,I as Se,J as p,K as Ie,L as D,M as U,N as H,O as Q,P as Xe,Q as Y,R as Ye,S as ne,T as qe,U as Re,V as Ge,W as Je,X as Qe,Y as et,Z as O,$ as se,a0 as tt,a1 as nt,a2 as ce,a3 as at,a4 as ot,a5 as lt,a6 as it,a7 as rt,a8 as st,a9 as ct,aa as dt,ab as ut,ac as ft,ad as vt,ae as ht,af as bt,ag as gt,ah as de,ai as mt,aj as ee,u as $e,a as _t,_ as Pe,e as F,w as q,ak as j,o as I,F as ue,r as yt,b as te,al as fe,t as ve,h as he,g as xt,am as kt,an as wt}from"./index.83aba976.js";function Bt(){const e=T([]),o=[];return We(()=>{e.value=[]}),[e,i=>(o[i]||(o[i]=a=>{e.value[i]=a}),o[i])]}function Ct(e,o,n){let i=0;const a=e.scrollLeft,l=n===0?1:Math.round(n*1e3/16);function c(){e.scrollLeft+=(o-a)/l,++i<l&&J(c)}c()}function Tt(e,o,n,i){let a=_e(e);const l=a<o,c=n===0?1:Math.round(n*1e3/16),h=(o-a)/c;function s(){a+=h,(l&&a>o||!l&&a<o)&&(a=o),Ze(e,a),l&&a<o||!l&&a>o?J(s):i&&J(i)}s()}function St(e,o){if(!je||!window.IntersectionObserver)return;const n=new IntersectionObserver(l=>{o(l[0].intersectionRatio>0)},{root:document.body}),i=()=>{e.value&&n.observe(e.value)},a=()=>{e.value&&n.unobserve(e.value)};Ue(a),Ke(a),ye(i)}const[It,Rt]=E("sticky"),$t={zIndex:R,position:Se("top"),container:Object,offsetTop:p(0),offsetBottom:p(0)};var Pt=L({name:It,props:$t,emits:["scroll","change"],setup(e,{emit:o,slots:n}){const i=T(),a=xe(i),l=ke({fixed:!1,width:0,height:0,transform:0}),c=C(()=>we(e.position==="top"?e.offsetTop:e.offsetBottom)),h=C(()=>{const{fixed:f,height:y,width:x}=l;if(f)return{width:`${x}px`,height:`${y}px`}}),s=C(()=>{if(!l.fixed)return;const f=Be(Ce(e.zIndex),{width:`${l.width}px`,height:`${l.height}px`,[e.position]:`${c.value}px`});return l.transform&&(f.transform=`translate3d(0, ${l.transform}px, 0)`),f}),k=f=>o("scroll",{scrollTop:f,isFixed:l.fixed}),b=()=>{if(!i.value||Ie(i))return;const{container:f,position:y}=e,x=D(i),g=_e(window);if(l.width=x.width,l.height=x.height,y==="top")if(f){const w=D(f),d=w.bottom-c.value-l.height;l.fixed=c.value>x.top&&w.bottom>0,l.transform=d<0?d:0}else l.fixed=c.value>x.top;else{const{clientHeight:w}=document.documentElement;if(f){const d=D(f),$=w-d.top-c.value-l.height;l.fixed=w-c.value<x.bottom&&w>d.top,l.transform=$<0?-$:0}else l.fixed=w-c.value<x.bottom}k(g)};return z(()=>l.fixed,f=>o("change",f)),Te("scroll",b,{target:a,passive:!0}),St(i,b),()=>{var f;return u("div",{ref:i,style:h.value},[u("div",{class:Rt({fixed:l.fixed}),style:s.value},[(f=n.default)==null?void 0:f.call(n)])])}}});const At=U(Pt),[Nt,be]=E("tab");var zt=L({name:Nt,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:R,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:H},setup(e,{slots:o}){const n=C(()=>{const a={},{type:l,color:c,disabled:h,isActive:s,activeColor:k,inactiveColor:b}=e;c&&l==="card"&&(a.borderColor=c,h||(s?a.backgroundColor=c:a.color=c));const y=s?k:b;return y&&(a.color=y),a}),i=()=>{const a=u("span",{class:be("text",{ellipsis:!e.scrollable})},[o.title?o.title():e.title]);return e.dot||Q(e.badge)&&e.badge!==""?u(Xe,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[a]}):a};return()=>u("div",{id:e.id,role:"tab",class:[be([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:n.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[i()])}});const[Lt,ge]=E("tabs");var Ot=L({name:Lt,props:{count:Y(Number),inited:Boolean,animated:Boolean,duration:Y(R),swipeable:Boolean,lazyRender:Boolean,currentIndex:Y(Number)},emits:["change"],setup(e,{emit:o,slots:n}){const i=T(),a=h=>o("change",h),l=()=>{var h;const s=(h=n.default)==null?void 0:h.call(n);return e.animated||e.swipeable?u(qe,{ref:i,loop:!1,class:ge("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:a},{default:()=>[s]}):s},c=h=>{const s=i.value;s&&s.state.active!==h&&s.swipeTo(h,{immediate:!e.inited})};return z(()=>e.currentIndex,c),Ye(()=>{c(e.currentIndex)}),ne({swipeRef:i}),()=>u("div",{class:ge("content",{animated:e.animated||e.swipeable})},[l()])}});const[Ae,Z]=E("tabs"),pt={type:Se("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:p(0),duration:p(.3),animated:Boolean,ellipsis:H,swipeable:Boolean,scrollspy:Boolean,offsetTop:p(0),background:String,lazyRender:H,lineWidth:R,lineHeight:R,beforeChange:Function,swipeThreshold:p(5),titleActiveColor:String,titleInactiveColor:String},Ne=Symbol(Ae);var Et=L({name:Ae,props:pt,emits:["click","change","scroll","disabled","rendered","click-tab","update:active"],setup(e,{emit:o,slots:n}){let i,a,l;const c=T(),h=T(),s=T(),k=T(),b=Re(),f=xe(c),[y,x]=Bt(),{children:g,linkChildren:w}=Ge(Ne),d=ke({inited:!1,position:"",lineStyle:{},currentIndex:-1}),$=C(()=>g.length>e.swipeThreshold||!e.ellipsis||e.shrink),K=C(()=>({borderColor:e.color,background:e.background})),P=(t,r)=>{var v;return(v=t.name)!=null?v:r},ae=C(()=>{const t=g[d.currentIndex];if(t)return P(t,d.currentIndex)}),X=C(()=>we(e.offsetTop)),oe=C(()=>e.sticky?X.value+i:0),M=t=>{const r=h.value,v=y.value;if(!$.value||!r||!v||!v[d.currentIndex])return;const m=v[d.currentIndex].$el,_=m.offsetLeft-(r.offsetWidth-m.offsetWidth)/2;Ct(r,_,t?0:+e.duration)},A=()=>{const t=d.inited;O(()=>{const r=y.value;if(!r||!r[d.currentIndex]||e.type!=="line"||Ie(c.value))return;const v=r[d.currentIndex].$el,{lineWidth:m,lineHeight:_}=e,B=v.offsetLeft+v.offsetWidth/2,N={width:se(m),backgroundColor:e.color,transform:`translateX(${B}px) translateX(-50%)`};if(t&&(N.transitionDuration=`${e.duration}s`),Q(_)){const re=se(_);N.height=re,N.borderRadius=re}d.lineStyle=N})},ze=t=>{const r=t<d.currentIndex?-1:1;for(;t>=0&&t<g.length;){if(!g[t].disabled)return t;t+=r}},V=(t,r)=>{const v=ze(t);if(!Q(v))return;const m=g[v],_=P(m,v),B=d.currentIndex!==null;d.currentIndex!==v&&(d.currentIndex=v,r||M(),A()),_!==e.active&&(o("update:active",_),B&&o("change",_,m.title)),l&&!e.scrollspy&&nt(Math.ceil(ce(c.value)-X.value))},W=(t,r)=>{const v=g.find((_,B)=>P(_,B)===t),m=v?g.indexOf(v):0;V(m,r)},le=(t=!1)=>{if(e.scrollspy){const r=g[d.currentIndex].$el;if(r&&f.value){const v=ce(r,f.value)-oe.value;a=!0,Tt(f.value,v,t?0:+e.duration,()=>{a=!1})}}},Le=(t,r,v)=>{const{title:m,disabled:_}=g[r],B=P(g[r],r);_?o("disabled",B,m):(lt(e.beforeChange,{args:[B],done:()=>{V(r),le()}}),o("click",B,m),it(t)),o("click-tab",{name:B,title:m,event:v,disabled:_})},Oe=t=>{l=t.isFixed,o("scroll",t)},pe=t=>{O(()=>{W(t),le(!0)})},Ee=()=>{for(let t=0;t<g.length;t++){const{top:r}=D(g[t].$el);if(r>oe.value)return t===0?0:t-1}return g.length-1},De=()=>{if(e.scrollspy&&!a){const t=Ee();V(t)}},Fe=()=>g.map((t,r)=>u(zt,at({key:t.id,id:`${b}-${r}`,ref:x(r),type:e.type,color:e.color,style:t.titleStyle,class:t.titleClass,shrink:e.shrink,isActive:r===d.currentIndex,controls:t.id,scrollable:$.value,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,onClick:v=>Le(t,r,v)},ot(t,["dot","badge","title","disabled","showZeroBadge"])),{title:t.$slots.title})),He=()=>{if(e.type==="line"&&g.length)return u("div",{class:Z("line"),style:d.lineStyle},null)},ie=()=>{var t,r,v;const{type:m,border:_,sticky:B}=e,N=[u("div",{ref:B?void 0:s,class:[Z("wrap"),{[tt]:m==="line"&&_}]},[u("div",{ref:h,role:"tablist",class:Z("nav",[m,{shrink:e.shrink,complete:$.value}]),style:K.value,"aria-orientation":"horizontal"},[(t=n["nav-left"])==null?void 0:t.call(n),Fe(),He(),(r=n["nav-right"])==null?void 0:r.call(n)])]),(v=n["nav-bottom"])==null?void 0:v.call(n)];return B?u("div",{ref:s},[N]):N};z([()=>e.color,Je],A),z(()=>e.active,t=>{t!==ae.value&&W(t)}),z(()=>g.length,()=>{d.inited&&(W(e.active),A(),O(()=>{M(!0)}))});const Me=()=>{W(e.active,!0),O(()=>{d.inited=!0,s.value&&(i=D(s.value).height),M(!0)})},Ve=(t,r)=>o("rendered",t,r);return ne({resize:()=>{A(),O(()=>{var t,r;return(r=(t=k.value)==null?void 0:t.swipeRef.value)==null?void 0:r.resize()})},scrollTo:pe}),Qe(A),et(A),ye(Me),Te("scroll",De,{target:f,passive:!0}),w({id:b,props:e,setLine:A,onRendered:Ve,currentName:ae,scrollIntoView:M}),()=>u("div",{ref:c,class:Z([e.type])},[e.sticky?u(At,{container:c.value,offsetTop:X.value,onScroll:Oe},{default:()=>[ie()]}):ie(),u(Ot,{ref:k,count:g.length,inited:d.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:d.currentIndex,onChange:V},{default:()=>{var t;return[(t=n.default)==null?void 0:t.call(n)]}})])}});const[Dt,G]=E("tab"),Ft=Be({},rt,{dot:Boolean,name:R,badge:R,title:String,disabled:Boolean,titleClass:st,titleStyle:[String,Object],showZeroBadge:H});var Ht=L({name:Dt,props:Ft,setup(e,{slots:o}){const n=Re(),i=T(!1),{parent:a,index:l}=ct(Ne);if(!a)return;const c=()=>{var b;return(b=e.name)!=null?b:l.value},h=()=>{i.value=!0,a.props.lazyRender&&O(()=>{a.onRendered(c(),e.title)})},s=C(()=>{const b=c()===a.currentName.value;return b&&!i.value&&h(),b}),k=T(!s.value);return z(s,b=>{b?k.value=!1:ht(()=>{k.value=!0})}),z(()=>e.title,()=>{a.setLine(),a.scrollIntoView()}),dt(ut,s),()=>{var b;const f=`${a.id}-${l.value}`,{animated:y,swipeable:x,scrollspy:g,lazyRender:w}=a.props;if(!o.default&&!y)return;const d=g||s.value;if(y||x)return u(ft,{id:n,role:"tabpanel",class:G("panel-wrapper",{inactive:k.value}),tabindex:s.value?0:-1,"aria-hidden":!s.value,"aria-labelledby":f},{default:()=>{var P;return[u("div",{class:G("panel")},[(P=o.default)==null?void 0:P.call(o)])]}});const K=i.value||g||!w?(b=o.default)==null?void 0:b.call(o):null;return ne({id:n}),vt(u("div",{id:n,role:"tabpanel",class:G("panel"),tabindex:d?0:-1,"aria-labelledby":f},[K]),[[bt,d]])}}});const Mt=U(Ht),Vt=U(Et),[Wt,S]=E("nav-bar"),Zt={title:String,fixed:Boolean,zIndex:R,border:H,leftText:String,rightText:String,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean};var jt=L({name:Wt,props:Zt,emits:["click-left","click-right"],setup(e,{emit:o,slots:n}){const i=T(),a=gt(i,S),l=b=>o("click-left",b),c=b=>o("click-right",b),h=()=>n.left?n.left():[e.leftArrow&&u(ee,{class:S("arrow"),name:"arrow-left"},null),e.leftText&&u("span",{class:S("text")},[e.leftText])],s=()=>n.right?n.right():u("span",{class:S("text")},[e.rightText]),k=()=>{const{title:b,fixed:f,border:y,zIndex:x}=e,g=Ce(x),w=e.leftArrow||e.leftText||n.left,d=e.rightText||n.right;return u("div",{ref:i,style:g,class:[S({fixed:f}),{[mt]:y,"van-safe-area-top":e.safeAreaInsetTop}]},[u("div",{class:S("content")},[w&&u("div",{class:[S("left"),de],onClick:l},[h()]),u("div",{class:[S("title"),"van-ellipsis"]},[n.title?n.title():b]),d&&u("div",{class:[S("right"),de],onClick:c},[s()])])])};return()=>e.fixed&&e.placeholder?a(k):k()}});const me=U(jt),Ut=L({components:{[ee.name]:ee},props:{activeIndex:{type:Number,default:0}},setup(){const e=$e(),o=_t();return T(0),{menus:C(()=>[{span:"\u6D88\u606F",icon:"chat-o",activeIcon:"chat",path:"/",dot:o.unReadNum},{span:"\u901A\u8BAF\u5F55",icon:"friends-o",activeIcon:"friends",path:"/friend"},{span:"\u6211\u7684",icon:"manager-o",activeIcon:"manager",path:"/me"}]),handleClick:(a,l)=>{e.push(a.path)}}}});const Kt={class:"tab-bar"};function Xt(e,o,n,i,a,l){const c=j("van-tabbar-item"),h=j("van-tabbar");return I(),F("div",Kt,[u(h,{route:""},{default:q(()=>[(I(!0),F(ue,null,yt(e.menus,s=>(I(),F(ue,null,[s.dot?(I(),te(c,{key:0,replace:"",to:s.path,icon:s.icon,badge:s.dot},{default:q(()=>[fe(ve(s.span),1)]),_:2},1032,["to","icon","badge"])):(I(),te(c,{key:1,replace:"",to:s.path,icon:s.icon},{default:q(()=>[fe(ve(s.span),1)]),_:2},1032,["to","icon"]))],64))),256))]),_:1})])}const Yt=Pe(Ut,[["render",Xt],["__scopeId","data-v-0a91bf1d"]]),qt={components:{TabBar:Yt,Tab:Mt,Tabs:Vt,[me.name]:me},props:{tabBarProps:{type:Object,default(){return null}},title:{type:String}},setup(){const e=$e();return{onClickLeft(){e.back()}}}};const Gt={class:"page"},Jt={key:0,class:"header"};function Qt(e,o,n,i,a,l){const c=j("van-nav-bar"),h=j("TabBar");return I(),F("div",Gt,[n.title?(I(),F("div",Jt,[u(c,{title:n.title,"left-arrow":"",onClickLeft:i.onClickLeft},null,8,["title","onClickLeft"])])):he("",!0),xt("div",{class:wt(["body",[{"with-tab-bar":Boolean(n.tabBarProps),"with-header":Boolean(n.title)}]])},[kt(e.$slots,"default",{},void 0,!0)],2),n.tabBarProps?(I(),te(h,{key:1,activeIndex:n.tabBarProps.activeIndex},null,8,["activeIndex"])):he("",!0)])}const nn=Pe(qt,[["render",Qt],["__scopeId","data-v-26e5836f"]]);export{nn as P};
